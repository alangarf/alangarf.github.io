<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.0 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Rinse Repeat. :( - Retro Challenge 2017/04 - FromOrbit.com</title>
<meta name="description" content="Over, and over, and over, and over, and over, and over again.">


  <meta name="author" content="Alan Garfield">
  
  <meta property="article:author" content="Alan Garfield">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en">
<meta property="og:site_name" content="FromOrbit.com">
<meta property="og:title" content="Rinse Repeat. :( - Retro Challenge 2017/04">
<meta property="og:url" content="https://fromorbit.com/2017/04/18/rinse-repeat-rc201704.html">


  <meta property="og:description" content="Over, and over, and over, and over, and over, and over again.">



  <meta property="og:image" content="https://fromorbit.com/assets/images/2017-04-18/axc-em-bk.jpg">



  <meta name="twitter:site" content="@alangarf">
  <meta name="twitter:title" content="Rinse Repeat. :( - Retro Challenge 2017/04">
  <meta name="twitter:description" content="Over, and over, and over, and over, and over, and over again.">
  <meta name="twitter:url" content="https://fromorbit.com/2017/04/18/rinse-repeat-rc201704.html">

  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://fromorbit.com/assets/images/2017-04-18/axc-em-bk.jpg">
  

  
    <meta name="twitter:creator" content="@alangarf">
  



  <meta property="article:published_time" content="2017-04-18T00:00:00+10:00">






<link rel="canonical" href="https://fromorbit.com/2017/04/18/rinse-repeat-rc201704.html">












<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="FromOrbit.com Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          FromOrbit.com
          
        </a>
        <ul class="visible-links"></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay"
  style=" background-image: linear-gradient(rgba(97, 93, 140, 0.8), rgba(97, 93, 140, 0.8)), url('/assets/images/2017-04-18/axc-em-bk.jpg');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          Rinse Repeat. :( - Retro Challenge 2017/04

        
      </h1>
      
        <p class="page__lead">Over, and over, and over, and over, and over, and over again.
</p>
      
      

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


      
    </div>
  
  
</div>







<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="https://fromorbit.com/">
        <img src="/assets/bio.jpg" alt="Alan Garfield" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://fromorbit.com/" itemprop="url">Alan Garfield</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Generic nerd who dabbles in programming, electronics, CNC and retro computing.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      
        <li>
          <a href="https://twitter.com/alangarf" itemprop="sameAs" rel="nofollow noopener noreferrer me">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span>
          </a>
        </li>
      

      

      

      

      

      

      

      
        <li>
          <a href="https://github.com/alangarf" itemprop="sameAs" rel="nofollow noopener noreferrer me">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      
        
          <li>
            <a href="https://www.youtube.com/user/randomgarfield" itemprop="sameAs" rel="nofollow noopener noreferrer me">
              <i class="fab fa-fw fa-youtube" aria-hidden="true"></i><span class="label">YouTube</span>
            </a>
          </li>
        
      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Rinse Repeat. :( - Retro Challenge 2017/04">
    <meta itemprop="description" content="Over, and over, and over, and over, and over, and over again.">
    <meta itemprop="datePublished" content="2017-04-18T00:00:00+10:00">
    

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        
        <p>Apart from work and family commitments over Easter I’ve been stuck in a rinse
repeat cycle with this board.</p>

<p>I am still trying to iron the bugs out, and I’m having weird issues with the
firmware. I started thinking about porting the TS2 “monitor” to this board, but
was having weird issues trying to get the UART to output a string from ROM.</p>

<h1 id="im-doing-something-wrong-">I’m doing something wrong …</h1>

<p>I then set up a new project just to do a simple test of blinking the LED in a
sequence stored in ROM. It was about this time I started to suspect there was
something wrong with the CPU or the board. Reading a byte from RAM with <em>post
decrement</em> addressing would work, but trying to do the same in ROM would crash
the CPU. After much stuffing around I finally put out a cry on Twitter and
@brouhaha mentioned that the CPU could be <em>double faulting</em> and asserting it’s
HALT line. I hadn’t realized this CPU had bidirectional RESET and HALT lines!</p>

<p>Looking at the schematic I made, I did wonder why the RESET and HALT lines had
resistors in them. It now makes sense given they can drive the lines as well as
take input. So anyway, I stuck my multimeter into the HALT pin when a crash
happened and yes the CPU was double faulting.</p>

<h1 id="the-7-stages-of-grief-">The 7 Stages of Grief …</h1>

<p>At this point I doubted <em>everything</em> I spent a week or more trying to solve why
this was happening. I questioned my understanding of m68k assembler, and kept
breaking my testing program down till all I had was basically three
instructions and the problem still existed. I questioned the assembler. I
questioned the linker. I whinged on Twitter, I complained constantly to @trc_vm
via Slack. I then questioned the new EEPROMs I had bought.</p>

<p>Which this last one may or may not be a real issue, but the previous EPROMs
were 90nS speed rated, and the RAM is 100nS speed rated. These new AT28C256
EEPROMs are a fair bit slower at 150nS, so I desoldered the 12MHz crystal and
under-clocked the CPU to 8MHz to see if that made any difference. In the end it
did, in some small way in that at least now it would appear to fall into the
exception handlers and not just double bus fault all the time. But I still had
my problem with byte loading values from ROM.</p>

<p>I then started to question “can the m68k actually address bytes, I’m sure it
can” so I scoured all possible resources to confirm it. Then I altered my
program to use words instead of bytes and the damn thing started working!</p>

<h1 id="time-to-crack-out-the-logic-analyzer">Time to crack out the logic analyzer.</h1>

<p>So now I’m to the point I’m questioning the board or the CPU. So I drag out the
logic analyzer and since I can’t find more than 5 chip clip leads I’m forced to
stuff around to get what I want. I set up my simple small test program to blink
the LED in a sequence stored in the ROM. First blink the LED twice, pause, then
blink the LED three times, pause, etc etc. Eventually up to 8 blinks.</p>

<p>Run this, I get my two blinks then a locked up LED. I wanted to see what the
ROMs were doing on the 8 bit address read. So I clipped up the RAM/ROM chip
select lines, the even and odd enable lines and the LED output.</p>

<figure class="half ">
  
    
    
    <a href="https://fromorbit.com/assets/images/2017-04-18/even.jpg">
        <img src="https://fromorbit.com/assets/images/2017-04-18/even.jpg" sizes="(max-width: 600px) 100vw, (max-width: 900px) 33vw, 500px" srcset="https://fromorbit.com/assets/images/2017-04-18/320-even.jpg 320w,https://fromorbit.com/assets/images/2017-04-18/640-even.jpg 640w,https://fromorbit.com/assets/images/2017-04-18/1280-even.jpg 1280w" alt="The even read" />
    </a>
  
    
    
    <a href="https://fromorbit.com/assets/images/2017-04-18/odd.jpg">
        <img src="https://fromorbit.com/assets/images/2017-04-18/odd.jpg" sizes="(max-width: 600px) 100vw, (max-width: 900px) 33vw, 500px" srcset="https://fromorbit.com/assets/images/2017-04-18/320-odd.jpg 320w,https://fromorbit.com/assets/images/2017-04-18/640-odd.jpg 640w,https://fromorbit.com/assets/images/2017-04-18/1280-odd.jpg 1280w" alt="The odd read" />
    </a>
  
  
    <figcaption>What the logic analyser saw…
</figcaption>
  
</figure>

<p>You can easily see the ROM is doing an 8bit read on even, then an 8bit read on
odd.</p>

<h1 id="damn-it-this-looks-ok--">Damn it, this looks OK … :(</h1>

<p>Suffice to say, I’m at a loss. I re-installed the original factory firmware to
finally see if I wasn’t going bananas. It too failed and entered a double
bus fault. So if the original firmware now fails I’ve somehow damaged the CPU
or the board.</p>

<p>I’ve found on eBay a few replacement CPU’s for every little money, but they
won’t be here in time for the end of the Retro Challenge. But it does mean I
will get this board going again. I’ve learnt so much playing with it, and my
understanding of GNU binutils etc is so much richer because of it. So perhaps I
can’t get anything going this year for the challenge…</p>

<h1 id="-or-can-i">… or can I?</h1>

<p>When I rescued this board from the dumpster I also recovered a few others with
it. I picked this board for the Retro Challenge because it seemed the most
approachable; generic MC68HC000; external UARTs and I/O. But it wasn’t the only
board I recovered with a m68k processor on it.</p>

<p>Enter the AMX AXC-EM with an MC68340RP16 on board!</p>

<figure class="half ">
  
    
    
    <a href="https://fromorbit.com/assets/images/2017-04-18/axc-em.jpg">
        <img src="https://fromorbit.com/assets/images/2017-04-18/axc-em.jpg" sizes="(max-width: 600px) 100vw, (max-width: 900px) 33vw, 500px" srcset="https://fromorbit.com/assets/images/2017-04-18/320-axc-em.jpg 320w,https://fromorbit.com/assets/images/2017-04-18/640-axc-em.jpg 640w,https://fromorbit.com/assets/images/2017-04-18/1280-axc-em.jpg 1280w" alt="AMX AXC-EM board" />
    </a>
  
    
    
    <a href="https://fromorbit.com/assets/images/2017-04-18/mc68340.jpg">
        <img src="https://fromorbit.com/assets/images/2017-04-18/mc68340.jpg" sizes="(max-width: 600px) 100vw, (max-width: 900px) 33vw, 500px" srcset="https://fromorbit.com/assets/images/2017-04-18/320-mc68340.jpg 320w,https://fromorbit.com/assets/images/2017-04-18/640-mc68340.jpg 640w,https://fromorbit.com/assets/images/2017-04-18/1280-mc68340.jpg 1280w" alt="MC68340 cpu" />
    </a>
  
  
</figure>

<h1 id="why-didnt-you-use-this-one-first">Why didn’t you use this one first?</h1>

<p>To be honest I wasn’t sure what I wanted, and I was familiar with the
MC68HC000. I also thought having the UARTs and I/O all on chip was cheating.
This board is basically the same thing functionally-wise to the other. It’s
just newer and with an ‘020 based CPU. Basically all the same hardware is on
board. Two UARTs, an LED, 8 DIP switches, battery backup RAM, clock/calendar,
etc etc. It’s still from 1992 so it fits the Challenge. :)</p>

<p>So yeah, now I start again basically. I have to figure out the memory map, the
device layout and the differences with an ‘020 versus a vanilla 68000. Dear god
I hope it can read bytes from ROM!</p>


        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2017-04-18T00:00:00+10:00">April 18, 2017</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?via=alangarf&text=Rinse+Repeat.+%3A%28+-+Retro+Challenge+2017%2F04%20https%3A%2F%2Ffromorbit.com%2F2017%2F04%2F18%2Frinse-repeat-rc201704.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fas fa-fw fa-share-alt" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ffromorbit.com%2F2017%2F04%2F18%2Frinse-repeat-rc201704.html" class="btn btn--facebook" aria-label="Share on Facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook">
    <i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://fromorbit.com/2017/04/18/rinse-repeat-rc201704.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>
</section>


      
  <nav class="pagination">
    
      <a href="/2017/04/08/gettin-somewhere-rc201704.html" class="pagination--pager" title="Now we’re get’n somewhere! - Retro Challenge 2017/04">Previous</a>
    
    
      <a href="/2017/04/26/m68k-environment-rc201704.html" class="pagination--pager" title="m68k Environment - Retro Challenge 2017/04">Next</a>
    
  </nav>


    </div>

    
      
        <div class="page__comments">
  
  
      <h4 class="page__comments-title">Comments</h4>
      <section id="disqus_thread"></section>
    
</div>

      
    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You May Also Enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/500x300.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2025/04/25/Alan-wishlist-or-stuff-he-wants-to-remember.html" rel="permalink">Alan’s Wishlist
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">MOAR STUFF
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2022-05-23/linear16.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2022/05/23/IRF510-linear-amp.html" rel="permalink">45W IRF510 HF Linear Amp
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">The little amp that could!
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2017-04-18/mc68340.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2017/05/19/m68k-crosstool-ng.html" rel="permalink">More fun with the m68k
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          6 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Finally I achieved my goal of getting a Mandelbrot routine running on this m68k board and I learned a lot along the way
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/2017-04-18/mc68340.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2017/04/26/m68k-environment-rc201704.html" rel="permalink">m68k Environment - Retro Challenge 2017/04
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          7 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Getting down and dirty with make and gcc.
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 <a href="https://fromorbit.com">FromOrbit.com</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/jekyll-themes/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>







    
  <script>
    var disqus_config = function () {
      this.page.url = "https://fromorbit.com/2017/04/18/rinse-repeat-rc201704.html";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/2017/04/18/rinse-repeat-rc201704"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://fromorbit-com.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  




  </body>
</html>
